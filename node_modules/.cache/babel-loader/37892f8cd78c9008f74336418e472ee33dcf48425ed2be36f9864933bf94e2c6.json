{"ast":null,"code":"import{useState}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SignInPage2(_ref){let{formData,setFormData,nextStep}=_ref;const navigate=useNavigate();const[nicknameError,setNicknameError]=useState(\"\");const[isCheckingNickname,setIsCheckingNickname]=useState(false);const[hasChecked,setHasChecked]=useState(false);const[isInputChanged,setIsInputChanged]=useState(false);const handleNicknameChange=async e=>{const value=e.target.value;setFormData({...formData,nickname:e.target.value});// Validate nickname on change\nawait validateNickname(value);setHasChecked(true);if(!isInputChanged)setIsInputChanged(true);};const validateNickname=async nickname=>{if(!nickname.trim()){setNicknameError(\"Nickname is required.\");return false;}try{const response=await fetch(`/api/check-nickname?nickname=${nickname}`);const{isAvailable}=await response.json();if(!isAvailable){setNicknameError(\"Sorry, that username is already taken!\");return false;}setNicknameError(\"\");// No errors\nreturn true;}catch(error){setNicknameError(\"Error checking nickname availability. Please try again.\");return false;}};const handleNextClick=async e=>{e.preventDefault();// Prevent default form submission\nsetIsCheckingNickname(true);// Show a loading state if checking is required\nconst isValid=await validateNickname(formData.nickname);setIsCheckingNickname(false);if(isValid){nextStep();// Proceed to the next step\n}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"signInBox\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"leftBox\",children:/*#__PURE__*/_jsx(\"img\",{src:\"img/fisrtpage.svg\",alt:\"animation\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"rightBox\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"signInForm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"progressBar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress_two\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"body_text\",children:\"Sign up to ARTBOOK!\"})]}),/*#__PURE__*/_jsxs(\"fieldset\",{className:\"nickname\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"showEmoji\",children:/*#__PURE__*/_jsx(\"div\",{children:formData.emojis})}),/*#__PURE__*/_jsx(\"div\",{children:\"Set Your Username\"}),/*#__PURE__*/_jsxs(\"div\",{className:`name_input ${nicknameError?\"error_state\":\"\"}`,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.nickname,placeholder:\"Name\",onChange:handleNicknameChange}),/*#__PURE__*/_jsx(\"img\",{src:\"img/name.svg\",alt:\"name\",className:\"nameImg\"}),nicknameError&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:nicknameError}),hasChecked&&/*#__PURE__*/_jsx(\"img\",{src:nicknameError?\"img/error.svg\":\"img/success.svg\",alt:nicknameError?\"error\":\"success\",className:\"errorImg\"})]})]}),/*#__PURE__*/_jsxs(\"fieldset\",{className:\"btns\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"skipBtn form_btn\",onClick:()=>navigate(\"/\"),children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Already have an account? \",/*#__PURE__*/_jsx(\"div\",{className:\"signIn\",onClick:()=>navigate(\"/sign-in\"),children:\"Sign in\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:`nextBtn form_btn ${!isInputChanged?\"initial_state_btn\":\"\"} ${nicknameError?\"initial_state_btn\":\"\"}`,onClick:handleNextClick,children:[isCheckingNickname?\"Checking...\":\"Next\",/*#__PURE__*/_jsx(\"img\",{src:\"img/nextArrow.svg\",alt:\"right arrow\"})]})]})]})})]})});}export default SignInPage2;","map":{"version":3,"names":["useState","useNavigate","jsx","_jsx","jsxs","_jsxs","SignInPage2","_ref","formData","setFormData","nextStep","navigate","nicknameError","setNicknameError","isCheckingNickname","setIsCheckingNickname","hasChecked","setHasChecked","isInputChanged","setIsInputChanged","handleNicknameChange","e","value","target","nickname","validateNickname","trim","response","fetch","isAvailable","json","error","handleNextClick","preventDefault","isValid","children","className","src","alt","emojis","type","placeholder","onChange","onClick"],"sources":["/Users/yoonsoo/Documents/dev/artbook/src/signInForm/SignInPage2.js"],"sourcesContent":["import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nfunction SignInPage2({ formData, setFormData, nextStep }) {\n    const navigate = useNavigate();\n    const [nicknameError, setNicknameError] = useState(\"\");\n    const [isCheckingNickname, setIsCheckingNickname] = useState(false);\n    const [hasChecked, setHasChecked] = useState(false);\n    const [isInputChanged, setIsInputChanged] = useState(false);\n\n    const handleNicknameChange = async (e) => {\n        const value = e.target.value;\n        setFormData({ ...formData, nickname: e.target.value });\n\n        // Validate nickname on change\n        await validateNickname(value);\n        setHasChecked(true);\n        if (!isInputChanged) setIsInputChanged(true);\n    };\n\n    const validateNickname = async (nickname) => {\n        if (!nickname.trim()) {\n            setNicknameError(\"Nickname is required.\");\n            return false;\n        }\n    \n        try {\n            const response = await fetch(`/api/check-nickname?nickname=${nickname}`);\n            const { isAvailable } = await response.json();\n    \n            if (!isAvailable) {\n                setNicknameError(\"Sorry, that username is already taken!\");\n                return false;\n            }\n    \n            setNicknameError(\"\"); // No errors\n            return true;\n        } catch (error) {\n            setNicknameError(\"Error checking nickname availability. Please try again.\");\n            return false;\n        }\n    };\n    \n\n    const handleNextClick = async (e) => {\n        e.preventDefault(); // Prevent default form submission\n        setIsCheckingNickname(true); // Show a loading state if checking is required\n\n        const isValid = await validateNickname(formData.nickname);\n        setIsCheckingNickname(false);\n\n        if (isValid) {\n            nextStep(); // Proceed to the next step\n        }\n    };\n\n  return (\n    <div>\n        <div className=\"signInBox\">\n            <div className=\"leftBox\">\n                <img src=\"img/fisrtpage.svg\" alt=\"animation\" />\n            </div>\n            <div className=\"rightBox\">\n                <form className=\"signInForm\">\n                    <div>\n                        <div className=\"progressBar\">\n                            <div className=\"progress_two\"></div>\n                        </div>\n                        <div className=\"body_text\">Sign up to ARTBOOK!</div>\n                    </div>\n                        \n                    <fieldset className=\"nickname\">\n                        <div className=\"showEmoji\">\n                            <div>{formData.emojis}</div>\n                        </div>\n\n                        <div>Set Your Username</div>\n                        <div className={`name_input ${nicknameError ? \"error_state\" : \"\"}`}>\n                            <input type=\"text\" value={formData.nickname} placeholder=\"Name\" onChange={handleNicknameChange} />\n                            <img src=\"img/name.svg\" alt=\"name\" className=\"nameImg\" />\n                            {nicknameError && <div className=\"error\">{nicknameError}</div>}\n                            {hasChecked && ( \n                                <img\n                                    src={nicknameError ? \"img/error.svg\" : \"img/success.svg\"}\n                                    alt={nicknameError ? \"error\" : \"success\"}\n                                    className=\"errorImg\"\n                                />\n                            )}\n                        </div>  \n                    </fieldset>\n\n                    <fieldset className=\"btns\">\n                        <button className=\"skipBtn form_btn\" onClick={() => navigate(\"/\")}>Cancel</button>\n                        <div>Already have an account? <div className=\"signIn\" onClick={() => navigate(\"/sign-in\")}>Sign in</div></div>\n                        <button\n                                className={`nextBtn form_btn ${\n                                    !isInputChanged ? \"initial_state_btn\" : \"\"\n                                } ${nicknameError ? \"initial_state_btn\" : \"\"}`}\n                                onClick={handleNextClick}\n                            >\n                                {isCheckingNickname ? \"Checking...\" : \"Next\"}\n                                <img src=\"img/nextArrow.svg\" alt=\"right arrow\" />\n                        </button>\n                    </fieldset>\n                </form>\n            </div>\n        </div>\n    </div>\n  );\n}\n\nexport default SignInPage2;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}