{"ast":null,"code":"import{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import Nav from'../Nav.js';import Menu from'../Menu.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ResultArray(_ref){let{value,navId,userId}=_ref;const[objectsData,setObjectsData]=useState([]);const[selectedObject,setSelectedObject]=useState(null);const[isCardVisible,setIsCardVisible]=useState(false);const[isLoading,setIsLoading]=useState(true);const[favoriteArtworks,setFavoriteArtworks]=useState([]);const[isFavorite,setIsFavorite]=useState(false);const navigate=useNavigate();const[isMenuOpen,setIsMenuOpen]=useState(false);const toggleMenu=()=>{setIsMenuOpen(!isMenuOpen);};const fetchFavArtworks=async userId=>{try{const response=await fetch(`http://localhost:8000/api/users/${userId}/fav-artworks`);if(!response.ok){throw new Error('Failed to load favorite artworks');}const favArtworks=await response.json();console.log('Favorite Artworks:',favArtworks);// Update your state or display the data\nsetFavoriteArtworks(favArtworks);}catch(error){console.error('Error fetching favorite artworks:',error);}};// fetch fav artworks\n// Call this function in a useEffect or on a button click\nuseEffect(()=>{if(userId){fetchFavArtworks(userId);}},[userId]);const checkIsFavorite=id=>{console.log(\"favoriteArtworks:\",favoriteArtworks);console.log(\"아이디\",id);const isFound=favoriteArtworks.some(item=>item.object_id===String(id));if(isFound){console.log(`ID ${id}가 배열에 존재합니다.`);setIsFavorite(true);}else{console.log(`ID ${id}가 배열에 없습니다.`);setIsFavorite(false);}};useEffect(()=>{console.log(`isFavorite updated: ${isFavorite}`);},[isFavorite]);const toggleFavoriteArtwork=async artwork=>{if(isFavorite){removeArtwork(artwork.objectID);}else{saveArtwork(artwork);}};const removeArtwork=async artwork=>{try{const response=await fetch(`http://localhost:8000/api/users/${userId}/fav-artworks/${artwork}`,{method:'DELETE'});if(!response.ok){throw new Error('Failed to remove artwork');}console.log(\"Deleted Successfully\");setIsFavorite(false);fetchFavArtworks(userId);}catch(error){console.error('Error removing artwork:',error);}};const saveArtwork=async artwork=>{console.log(artwork);try{const response=await fetch(`http://localhost:8000/api/users/${userId}/fav-artworks`,{method:'PATCH',headers:{'Content-Type':'application/json'},body:JSON.stringify({object_id:artwork.objectID,object_name:artwork.title,object_url:artwork.primaryImageSmall,object_artistName:artwork.artistDisplayName||'Unknown',object_year:artwork.objectDate||'Unknown'})});if(!response.ok){throw new Error('Failed to save artwork');}const updatedUser=await response.json();console.log('Artwork saved successfully:',updatedUser);setIsFavorite(true);fetchFavArtworks(userId);}catch(error){console.error('Error saving artwork:',error);}};// loading\nuseEffect(()=>{const timer=setTimeout(()=>{setIsLoading(false);},2500);return()=>clearTimeout(timer);},[]);// fetch\nuseEffect(()=>{if(value&&Array.isArray(value)&&navId){let objects=value.slice(0,10);// https://chatgpt.com/share/67008a5d-da2c-8011-9e08-598ec7add6e7\nconst fetchData=async()=>{// Fetch the selected card's data before fetching related data\nconst[initialResponse,dataArr]=await Promise.all([fetch(`https://collectionapi.metmuseum.org/public/collection/v1/objects/${navId}`).then(res=>res.json()),Promise.all(objects.map(async object=>{const response=await fetch(`https://collectionapi.metmuseum.org/public/collection/v1/objects/${object}`);const data=await response.json();return data;}))]);// Filter DataArr by: 1. No image 2. Same as the selected data (to prevent overlapping results)\nconst filteredDataArr=dataArr.filter(data=>data.primaryImage!==\"\").filter(data=>data.objectID!==initialResponse.objectID);// Combine two arrays to load as a table by using map\nconst dataArray=[initialResponse].concat(filteredDataArr);// Limit the number to 5 for visualization\nsetObjectsData(dataArray.slice(0,5));};fetchData();}},[value,navId]);// Slice text if it is too long\nconst truncateText=(text,n)=>{return text.length>n?text.slice(0,n)+'…':text;};// https://chatgpt.com/share/67008d05-e94c-8011-be21-8707500f3977\n// https://bender.sheridanc.on.ca/system-design/pokemon <- Thank you Harold!\n// Show a popover when the user clicks each table\nconst popupCardInfo=async url=>{checkIsFavorite(url);const data=await fetch(`https://collectionapi.metmuseum.org/public/collection/v1/objects/${url}`);const selectedObject=await data.json();setSelectedObject(selectedObject);setIsCardVisible(true);window.addEventListener('click',closeCardOnBackgroundClick);};// Close the Popover when user clicks the background! \nconst closeCardOnBackgroundClick=()=>{setIsCardVisible(false);setSelectedObject(null);window.removeEventListener('click',closeCardOnBackgroundClick);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Nav,{onMenuToggle:toggleMenu}),isMenuOpen&&/*#__PURE__*/_jsx(Menu,{userId:userId,onMenuToggle:toggleMenu}),isCardVisible&&/*#__PURE__*/_jsx(\"div\",{className:\"backgroundOverlay\"}),/*#__PURE__*/_jsx(\"div\",{className:`selectedCard ${isCardVisible?'':'none'}`,onClick:e=>e.stopPropagation(),children:selectedObject&&/*#__PURE__*/_jsxs(\"div\",{className:\"selectedCardBox\",children:[/*#__PURE__*/_jsx(\"img\",{src:isFavorite?'/img/heart-filled.svg':'/img/heart.svg',alt:\"button\",className:\"fav_button\",onClick:e=>{e.stopPropagation();// Prevent triggering the popover\ntoggleFavoriteArtwork(selectedObject);// Call the saveArtwork function\n}}),/*#__PURE__*/_jsx(\"div\",{onClick:()=>{setIsCardVisible(false);setSelectedObject(null);},children:/*#__PURE__*/_jsx(\"img\",{src:\"img/close.svg\",alt:\"close button\",className:\"closeButton\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:selectedObject.primaryImage,alt:\"card\",className:\"cardImage\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cardInfo\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"cardTitle\",children:truncateText(selectedObject.title,60)}),/*#__PURE__*/_jsx(\"div\",{className:\"cardArtist\",children:selectedObject.artistDisplayName||'Unknown'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cardTable\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Period\"}),/*#__PURE__*/_jsx(\"div\",{children:selectedObject.objectDate||'Unknown'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cardTable\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"div\",{children:selectedObject.objectBeginDate||'Unknown'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cardTable\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Culture\"}),/*#__PURE__*/_jsx(\"div\",{children:selectedObject.culture||'Unknown'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cardTable\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Medium\"}),/*#__PURE__*/_jsx(\"div\",{children:truncateText(selectedObject.medium,100)||'Unknown'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cardTable\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Classification\"}),/*#__PURE__*/_jsx(\"div\",{children:selectedObject.classification||'Unknown'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cardTable\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Accession Number\"}),/*#__PURE__*/_jsx(\"div\",{children:selectedObject.accessionNumber||'Unknown'})]})]}),/*#__PURE__*/_jsxs(\"a\",{href:\"https://maps.metmuseum.org/?lang=en-GB#17/40.779448/-73.963517/-61/\",className:\"cardButton\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[favoriteArtworks.length,\" On view at Living Map in\\xA0 \",/*#__PURE__*/_jsxs(\"strong\",{children:[\"Gallery \",selectedObject.GalleryNumber]})]}),/*#__PURE__*/_jsx(\"img\",{src:\"img/map.svg\",alt:\"map icon\",className:\"cardIcon\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"previousResult\",onClick:()=>navigate(-1),children:[/*#__PURE__*/_jsx(\"img\",{src:\"img/leftArrow.svg\",alt:\"previous arrow\",className:\"previousImg\"}),/*#__PURE__*/_jsx(\"div\",{className:\"previousText\",children:\"Back\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"object_Table\",children:/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsx(\"tbody\",{children:objectsData.map((object,index)=>/*#__PURE__*/// https://chatgpt.com/share/67008d05-e94c-8011-be21-8707500f3977\n_jsxs(\"tr\",{className:\"objectTable\",onClick:()=>popupCardInfo(object.objectID),children:[/*#__PURE__*/_jsx(\"td\",{className:\"tableImage\",children:/*#__PURE__*/_jsx(\"img\",{src:object.primaryImageSmall,alt:\"primary\",className:\"objectImage\",loading:\"lazy\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"objectInfo\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"objectTitle\",children:truncateText(object.title,45)}),/*#__PURE__*/_jsxs(\"div\",{className:\"objectDescription\",children:[object.artistDisplayName?object.artistDisplayName:'Unknown',\", \",object.objectDate]})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/button.svg\",alt:\"button\",className:\"table_button\"})})]},index))})})})]}),isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"img\",{src:\"img/artbook.svg\",alt:\"artbook logo\"})}):null]});}export default ResultArray;","map":{"version":3,"names":["useState","useEffect","useNavigate","Nav","Menu","jsx","_jsx","jsxs","_jsxs","ResultArray","_ref","value","navId","userId","objectsData","setObjectsData","selectedObject","setSelectedObject","isCardVisible","setIsCardVisible","isLoading","setIsLoading","favoriteArtworks","setFavoriteArtworks","isFavorite","setIsFavorite","navigate","isMenuOpen","setIsMenuOpen","toggleMenu","fetchFavArtworks","response","fetch","ok","Error","favArtworks","json","console","log","error","checkIsFavorite","id","isFound","some","item","object_id","String","toggleFavoriteArtwork","artwork","removeArtwork","objectID","saveArtwork","method","headers","body","JSON","stringify","object_name","title","object_url","primaryImageSmall","object_artistName","artistDisplayName","object_year","objectDate","updatedUser","timer","setTimeout","clearTimeout","Array","isArray","objects","slice","fetchData","initialResponse","dataArr","Promise","all","then","res","map","object","data","filteredDataArr","filter","primaryImage","dataArray","concat","truncateText","text","n","length","popupCardInfo","url","window","addEventListener","closeCardOnBackgroundClick","removeEventListener","children","onMenuToggle","className","onClick","e","stopPropagation","src","alt","objectBeginDate","culture","medium","classification","accessionNumber","href","GalleryNumber","index","loading"],"sources":["/Users/yoonsoo/Documents/dev/artbook/src/categories/ResultArray.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Nav from '../Nav.js';\nimport Menu from '../Menu.js';\n\nfunction ResultArray({ value, navId, userId }) {\n    const [objectsData, setObjectsData] = useState([]);\n    const [selectedObject, setSelectedObject] = useState(null); \n    const [isCardVisible, setIsCardVisible] = useState(false); \n    const [isLoading, setIsLoading] = useState(true);\n    const [favoriteArtworks, setFavoriteArtworks] = useState([]);\n    const [isFavorite, setIsFavorite] = useState(false);\n\n    const navigate = useNavigate();\n\n    const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n    const toggleMenu = () => {\n        setIsMenuOpen(!isMenuOpen);\n    };\n    \n    const fetchFavArtworks = async (userId) => {\n        try {\n            const response = await fetch(`http://localhost:8000/api/users/${userId}/fav-artworks`);\n    \n            if (!response.ok) {\n                throw new Error('Failed to load favorite artworks');\n            }\n    \n            const favArtworks = await response.json();\n            console.log('Favorite Artworks:', favArtworks);\n\n            // Update your state or display the data\n            setFavoriteArtworks(favArtworks);\n        } catch (error) {\n            console.error('Error fetching favorite artworks:', error);\n        }\n    };\n\n    // fetch fav artworks\n    // Call this function in a useEffect or on a button click\n    useEffect(() => {\n        if (userId) {\n            fetchFavArtworks(userId);\n        }\n    }, [userId]);\n\n\n    const checkIsFavorite = (id) => {\n        console.log(\"favoriteArtworks:\", favoriteArtworks);\n        console.log(\"아이디\", id);\n\n        const isFound = favoriteArtworks.some((item) => item.object_id === String(id));\n    \n        if (isFound) {\n            console.log(`ID ${id}가 배열에 존재합니다.`);\n            setIsFavorite(true);\n        } else {\n            console.log(`ID ${id}가 배열에 없습니다.`);\n            setIsFavorite(false);\n        }\n    }\n\n    useEffect(() => {\n        console.log(`isFavorite updated: ${isFavorite}`);\n    }, [isFavorite]);\n\n    const toggleFavoriteArtwork = async (artwork) => {\n        if(isFavorite) {\n            removeArtwork(artwork.objectID);\n        } else {\n            saveArtwork(artwork);\n        }\n    }\n    const removeArtwork = async (artwork) => {\n        try {\n            const response = await fetch(`http://localhost:8000/api/users/${userId}/fav-artworks/${artwork}`, {\n                method: 'DELETE',\n            });\n\n            if (!response.ok) {\n                throw new Error('Failed to remove artwork');\n            } \n            \n            console.log(\"Deleted Successfully\");\n            setIsFavorite(false);\n            fetchFavArtworks(userId);\n        } catch (error) {\n            console.error('Error removing artwork:', error);\n        }\n    };\n\n    const saveArtwork = async (artwork) => {\n        console.log(artwork);\n        try {\n            const response = await fetch(`http://localhost:8000/api/users/${userId}/fav-artworks`, {\n                method: 'PATCH',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    object_id: artwork.objectID,\n                    object_name: artwork.title,\n                    object_url: artwork.primaryImageSmall,\n                    object_artistName: artwork.artistDisplayName || 'Unknown',\n                    object_year: artwork.objectDate || 'Unknown',\n                }),\n            });\n    \n            if (!response.ok) {\n                throw new Error('Failed to save artwork');\n            }\n    \n            const updatedUser = await response.json();\n            console.log('Artwork saved successfully:', updatedUser);\n            setIsFavorite(true);\n            fetchFavArtworks(userId);\n        } catch (error) {\n            console.error('Error saving artwork:', error);\n        }\n    };\n\n    // loading\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            setIsLoading(false);\n        }, 2500);\n    \n        return () => clearTimeout(timer);\n      }, []);\n\n    // fetch\n    useEffect(() => {\n        if (value && Array.isArray(value) && navId) {\n            let objects = value.slice(0, 10); \n\n            // https://chatgpt.com/share/67008a5d-da2c-8011-9e08-598ec7add6e7\n            const fetchData = async () => {\n                // Fetch the selected card's data before fetching related data\n                const [initialResponse, dataArr] = await Promise.all([\n                    fetch(`https://collectionapi.metmuseum.org/public/collection/v1/objects/${navId}`).then(res => res.json()),\n                    Promise.all(\n                        objects.map(async (object) => {\n                            const response = await fetch(\n                                `https://collectionapi.metmuseum.org/public/collection/v1/objects/${object}`\n                            );\n                            const data = await response.json();\n                            return data;\n                        })\n                    )\n                ]);\n\n                // Filter DataArr by: 1. No image 2. Same as the selected data (to prevent overlapping results)\n                const filteredDataArr = dataArr\n                .filter(data => data.primaryImage !== \"\")\n                .filter(data => data.objectID !== initialResponse.objectID);\n\n                // Combine two arrays to load as a table by using map\n                const dataArray = [initialResponse].concat(filteredDataArr);\n\n                // Limit the number to 5 for visualization\n                setObjectsData(dataArray.slice(0, 5));\n            };\n    \n            fetchData();\n        }\n    }, [value, navId]);\n\n    // Slice text if it is too long\n    const truncateText = (text, n) => {\n        return text.length > n ? text.slice(0, n) + '…' : text;\n    };\n\n    // https://chatgpt.com/share/67008d05-e94c-8011-be21-8707500f3977\n    // https://bender.sheridanc.on.ca/system-design/pokemon <- Thank you Harold!\n    // Show a popover when the user clicks each table\n    const popupCardInfo = async (url) => {\n        checkIsFavorite(url);\n\n        const data = await fetch(`https://collectionapi.metmuseum.org/public/collection/v1/objects/${url}`)\n        const selectedObject = await data.json()\n    \n        setSelectedObject(selectedObject); \n        setIsCardVisible(true); \n\n        window.addEventListener('click', closeCardOnBackgroundClick);\n    }\n\n    // Close the Popover when user clicks the background! \n    const closeCardOnBackgroundClick = () => {\n        setIsCardVisible(false);\n        setSelectedObject(null);\n\n        window.removeEventListener('click', closeCardOnBackgroundClick);\n    };\n\n    return (\n        <div>\n            <Nav onMenuToggle={toggleMenu} />\n            {isMenuOpen && <Menu userId={userId} onMenuToggle={toggleMenu}  />}\n            {isCardVisible && <div className=\"backgroundOverlay\"></div>}\n            {/* https://chatgpt.com/share/67008d05-e94c-8011-be21-8707500f3977 */}\n            {/* stopPropagation: Block the effect of the closeCardOnBackgroundClick function */}\n            <div className={`selectedCard ${isCardVisible ? '' : 'none'}`} onClick={(e) => e.stopPropagation()}>\n            {selectedObject && (\n                <div className=\"selectedCardBox\">\n                    <img \n                        src={isFavorite ? '/img/heart-filled.svg' : '/img/heart.svg'}\n                        alt=\"button\" \n                        className=\"fav_button\" \n                        onClick={(e) => {\n                            e.stopPropagation(); // Prevent triggering the popover\n                            toggleFavoriteArtwork(selectedObject); // Call the saveArtwork function\n                        }} \n                    />\n                    {/* https://chatgpt.com/share/67008d05-e94c-8011-be21-8707500f3977 */}\n                    <div onClick={() => {setIsCardVisible(false); setSelectedObject(null);}}>\n                        <img src=\"img/close.svg\" alt=\"close button\" className=\"closeButton\" />\n                    </div>\n                    <div>\n                        <img src={selectedObject.primaryImage} alt=\"card\" className=\"cardImage\" />\n                    </div>\n                    <div className=\"cardInfo\">\n                        <div>\n                            <div className=\"cardTitle\">{truncateText(selectedObject.title, 60)}</div>\n                            <div className=\"cardArtist\">{selectedObject.artistDisplayName || 'Unknown'}</div>\n                        </div>\n                        <div>\n                            <div className=\"cardTable\">\n                                <div>Period</div>\n                                <div>{selectedObject.objectDate || 'Unknown'}</div>\n                            </div>\n                            <div className=\"cardTable\">\n                                <div>Date</div>\n                                <div>{selectedObject.objectBeginDate || 'Unknown'}</div>\n                            </div>\n                            <div className=\"cardTable\">\n                                <div>Culture</div>\n                                <div>{selectedObject.culture || 'Unknown'}</div>\n                            </div>\n                            <div className=\"cardTable\">\n                                <div>Medium</div>\n                                <div>{truncateText(selectedObject.medium, 100) || 'Unknown'}</div>\n                            </div>\n                            <div className=\"cardTable\">\n                                <div>Classification</div>\n                                <div>{selectedObject.classification || 'Unknown'}</div>\n                            </div>\n                            <div className=\"cardTable\">\n                                <div>Accession Number</div>\n                                <div>{selectedObject.accessionNumber || 'Unknown'}</div>\n                            </div>\n                        </div>\n                        <a href=\"https://maps.metmuseum.org/?lang=en-GB#17/40.779448/-73.963517/-61/\" className=\"cardButton\">\n                            <div>\n                                {favoriteArtworks.length} On view at Living Map in  <strong>Gallery {selectedObject.GalleryNumber}</strong>\n                            </div>\n                            <img src=\"img/map.svg\" alt=\"map icon\" className=\"cardIcon\" />\n                        </a>\n                    </div>\n                </div>\n                )}\n            </div>\n            <div className=\"wrapper\">\n                {/* https://njirumwai.hashnode.dev/react-router-6-go-back-how-to-go-back-using-react-router-v6 */}\n                <div className=\"previousResult\" onClick={() => navigate(-1)}>\n                    <img src=\"img/leftArrow.svg\" alt=\"previous arrow\" className=\"previousImg\" />\n                    <div className=\"previousText\">Back</div>\n                </div>\n                <div className=\"object_Table\">\n                    <table>\n                        <tbody>\n                            {objectsData.map((object, index) => (\n                                // https://chatgpt.com/share/67008d05-e94c-8011-be21-8707500f3977\n                                <tr className=\"objectTable\" key={index} onClick={() => popupCardInfo(object.objectID)}>\n                                    <td className=\"tableImage\">\n                                        <img src={object.primaryImageSmall} alt=\"primary\" className=\"objectImage\" loading=\"lazy\" />\n                                    </td>\n                                    <td>\n                                        <div className=\"objectInfo\">\n                                            <div className=\"objectTitle\">{truncateText(object.title, 45)}</div>\n                                            <div className=\"objectDescription\">\n                                                {object.artistDisplayName ? object.artistDisplayName : 'Unknown'}, {object.objectDate}\n                                            </div>\n                                        </div>\n                                    </td>\n                                    <td>\n                                        <img src=\"/img/button.svg\" alt=\"button\" className=\"table_button\" />\n                                    </td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </div>\n            </div> \n\n            {/* https://www.shecodes.io/athena/11556-react-how-to-show-a-loading-message-when-fetching-data */}\n            {isLoading ? \n            <div className=\"loading\">\n                <img src=\"img/artbook.svg\" alt=\"artbook logo\" />\n            </div> : null }\n\n            \n        </div>\n      );\n}\n\nexport default ResultArray;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}